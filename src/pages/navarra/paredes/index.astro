---
import HtmlLayout from "@/layouts/HtmlLayout.astro";
import type { MetaInfo } from "@/components/SEO/MetaInfo";
import { getCollection } from "astro:content";
import Breadcrumb from "@/components/ui/Breadcrumb.astro";
import HeroSection from "@/components/navarra/shared/HeroSection.astro";
import og_escuela from "@/assets/opengraph/og_escuela.jpg";
import heroImage from "@/assets/navarra/paredes.jpg";

const meta: MetaInfo = {
  pageTitle: "Paredes y Escalada en Navarra | Zunbeltz",
  pageDescription:
    "Escuelas de escalada y vías equipadas de Navarra. Descubre las mejores zonas de escalada deportiva y clásica.",
  pageTags: ["Escalada", "Navarra", "Paredes", "Vías", "Deportiva", "Clásica"],
  pageImage: og_escuela.src,
  pageUrl: `https://zunbeltz.org/navarra/paredes`,
};

// Obtener todas las escuelas de escalada
const climbingSchools = await getCollection("climbingCrags");
---

<HtmlLayout metaInfo={meta}>
  <main>
    <HeroSection
      title="Escalada en Navarra"
      description="Escala las mejores paredes. Escuelas de escalada deportiva y clásica en territorio navarro."
      photo={{ url: heroImage, caption: "Paredes y Escalada en Navarra" }}
    />

    <!-- Breadcrumb -->
    <div class="container">
      <Breadcrumb />
    </div>

    <!-- Content Section -->
    <section class="content">
      <div class="container">
        <div class="intro">
          <p>
            Navarra cuenta con numerosas escuelas de escalada distribuidas por
            todo el territorio. Desde las paredes calcáreas del norte hasta los
            roquedos de la zona media, encontrarás vías equipadas para todos los
            niveles y estilos de escalada.
          </p>
        </div>

        <!-- Lista de Escuelas -->
        <div class="list-header">
          <h2>Escuelas de escalada ({climbingSchools.length})</h2>
        </div>

        <div class="schools-list">
          {
            climbingSchools.map((school) => (
              <a href={`/navarra/paredes/${school.slug}`} class="school-card">
                <div class="school-info">
                  <h3 class="school-name">{school.data.name}</h3>
                  <p class="school-location">{school.data.location}</p>
                </div>
              </a>
            ))
          }
        </div>

        {
          climbingSchools.length === 0 && (
            <div class="empty-state">
              <p>No hay escuelas de escalada documentadas todavía.</p>
            </div>
          )
        }
      </div>
    </section>
  </main>
</HtmlLayout>

<style>
  main {
    min-height: 100vh;
  }

  /* Container */
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  /* Content Section */
  .content {
    padding: 3rem 0;
  }

  .intro {
    margin: 2rem 0 3rem;
  }

  .intro p {
    font-family: var(--font-paragraph);
    font-size: 1.1rem;
    line-height: 1.7;
    color: var(--color-content-300);
  }

  .list-header {
    margin-bottom: 2rem;
  }

  .list-header h2 {
    font-family: var(--font-title);
    font-size: 1.75rem;
    color: var(--color-content-500);
  }

  /* Schools List */
  .schools-list {
    display: grid;
    gap: 1.5rem;
  }

  .school-card {
    padding: 1.5rem;
    background: var(--color-surface-100);
    border: 2px solid var(--color-border-100);
    border-radius: var(--radius-xl);
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .school-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    border-color: var(--color-secondary-300);
  }

  .school-info {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .school-name {
    font-family: var(--font-title);
    font-size: 1.25rem;
    color: var(--color-content-500);
  }

  .school-location {
    font-family: var(--font-paragraph);
    font-size: 0.9rem;
    color: var(--color-content-300);
  }

  .orientations {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .orientation-badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    background: var(--color-surface-300);
    border-radius: var(--radius-md);
    font-family: var(--font-paragraph);
    font-size: 0.75rem;
    color: var(--color-content-400);
    font-weight: 600;
  }

  .empty-state {
    padding: 3rem;
    text-align: center;
    color: var(--color-content-200);
    font-family: var(--font-paragraph);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .school-card {
      padding: 1rem;
    }
  }
</style>
