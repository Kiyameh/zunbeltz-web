---
interface Props {
  approachTime?: { hours: number; minutes: number };
  descentTime?: { hours: number; minutes: number };
  returnTime?: { hours: number; minutes: number };
  recommendedMonths?: number[];
  catchmentArea?: number;
  normalFlow?: number;
}

const {
  approachTime,
  descentTime,
  returnTime,
  recommendedMonths,
  catchmentArea,
  normalFlow,
} = Astro.props;
---

{
  (approachTime ||
    descentTime ||
    returnTime ||
    recommendedMonths ||
    catchmentArea ||
    normalFlow) && (
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">Datos Técnicos</h3>
      </div>
      <div class="card-content">
        <div class="stats-list">
          {approachTime && (
            <div class="stat-item">
              <span class="stat-label">Aproximación</span>
              <span class="stat-value">
                {approachTime.hours > 0 && `${approachTime.hours}h `}
                {approachTime.minutes}min
              </span>
            </div>
          )}
          {descentTime && (
            <div class="stat-item">
              <span class="stat-label">Descenso</span>
              <span class="stat-value">
                {descentTime.hours > 0 && `${descentTime.hours}h `}
                {descentTime.minutes}min
              </span>
            </div>
          )}
          {returnTime && (
            <div class="stat-item">
              <span class="stat-label">Retorno</span>
              <span class="stat-value">
                {returnTime.hours > 0 && `${returnTime.hours}h `}
                {returnTime.minutes}min
              </span>
            </div>
          )}
          {recommendedMonths && recommendedMonths.length > 0 && (
            <div class="stat-item-full">
              <span class="stat-label">Época recomendada</span>
              <div class="months-grid">
                {[
                  "Ene",
                  "Feb",
                  "Mar",
                  "Abr",
                  "May",
                  "Jun",
                  "Jul",
                  "Ago",
                  "Sep",
                  "Oct",
                  "Nov",
                  "Dic",
                ].map((month, index) => (
                  <span
                    class:list={[
                      "month-badge",
                      {
                        recommended: recommendedMonths?.includes(index + 1),
                      },
                    ]}
                  >
                    {month}
                  </span>
                ))}
              </div>
            </div>
          )}
          {catchmentArea && (
            <div class="stat-item">
              <span class="stat-label">Cuenca captación</span>
              <span class="stat-value">{catchmentArea} km²</span>
            </div>
          )}
          {normalFlow && (
            <div class="stat-item">
              <span class="stat-label">Caudal normal</span>
              <span class="stat-value">{normalFlow} m³/s</span>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

<style>
  /* Card */
  .card {
    background: var(--color-surface-200);
    border: 2px solid var(--color-border-100);
    border-radius: var(--radius-xl);
    padding: 1.5rem;
    font-family: var(--font-paragraph);
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }

  .card-title {
    font-family: var(--font-title);
    font-size: 1.25rem;
    color: var(--color-content-500);
    margin: 0;
  }

  .card-content {
    color: var(--color-content-300);
    font-size: 0.9375rem;
    line-height: 1.6;
  }

  .stats-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .stat-item {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--color-border-100);
  }

  .stat-item:last-child {
    border-bottom: none;
    padding-bottom: 0;
  }

  .stat-label {
    font-family: var(--font-paragraph);
    font-size: 0.875rem;
    color: var(--color-content-200);
  }

  .stat-value {
    font-family: var(--font-title);
    font-size: 1.125rem;
    color: var(--color-primary-300);
    font-weight: 600;
  }

  .stat-item-full {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--color-border-100);
  }

  .stat-item-full:last-child {
    border-bottom: none;
    padding-bottom: 0;
  }

  /* Months Grid */
  .months-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 0.5rem;
  }

  .month-badge {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem 0.25rem;
    background: var(--color-surface-200);
    border-radius: var(--radius-md);
    font-family: var(--font-paragraph);
    font-size: 0.75rem;
    color: var(--color-content-300);
    font-weight: 500;
  }

  .month-badge.recommended {
    background: var(--color-primary-300);
    color: var(--color-surface-300);
    font-weight: 600;
  }
</style>
